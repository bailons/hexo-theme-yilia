!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="./",t(0)}({0:function(e,t,n){var o;(function(e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(72),a=r(i),s=n(134),c=r(s);!function(r){function i(e){var t=m.createElement("a");return t.href=e,t}function s(e,t,n){var o=new XMLHttpRequest;return o.open("GET",encodeURI(e)),o.onreadystatechange=function(){4==o.readyState&&200==o.status&&t(o.responseText)},o.onerror=n,o.withCredentials=!0,o.send(),o}function l(e,t,n,o){var r="string"==typeof t?t:(0,c.default)(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&"),i=new XMLHttpRequest;return i.open("POST",e),i.onreadystatechange=function(){4==i.readyState&&200==i.status&&n(i.responseText)},i.onerror=o,i.withCredentials=!0,i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send(r),i}var m=document,u=localStorage,d=m.scripts,p=d[d.length-1].src,f=(p.substring(0,p.lastIndexOf("/")),navigator.userAgent.indexOf("Edge")>-1),v=!!window.ActiveXObject||"ActiveXObject"in window;!function(e){"function"!=typeof e.matches&&(e.matches=e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||function(e){for(var t=this,n=(t.document||t.ownerDocument).querySelectorAll(e),o=0;n[o]&&n[o]!==t;)++o;return Boolean(n[o])}),"function"!=typeof e.closest&&(e.closest=function(e){for(var t=this;t&&1===t.nodeType;){if(t.matches(e))return t;t=t.parentNode}return null})}(window.Element.prototype);var g=function(){this.dom=arguments[0],this.opts=arguments[1],this.init(),this.autologin()};g.prototype={init:function(){var e=this;e.name=u.getItem("name"),e.email=u.getItem("email"),e.url=u.getItem("url"),e.avatar=u.getItem("avatar"),e.type=u.getItem("type"),e.logged_in=u.getItem("logged_in");var t=e.dom.getElementsByClassName("comment-box");"true"==e.logged_in?[].forEach.call(t,function(t){"1"==e.type&&t.querySelector(".comment-form-wrapper").classList.add("logged-in"),t.querySelector(".comment-form-name").value=e.name,t.querySelector(".comment-form-email").value=e.email,t.querySelector(".comment-form-url").value=e.url,t.querySelector(".comment-avatar-image").src=e.avatar}):([].forEach.call(t,function(t){t.querySelector(".comment-form-wrapper").classList.remove("logged-in"),t.querySelector(".comment-form-name").value="",t.querySelector(".comment-form-email").value="",t.querySelector(".comment-form-url").value="",t.querySelector(".comment-avatar-image").src=e.dom.querySelector(".comment-avatar-image").dataset.avatar}),u.setItem("logged_in","false"))},autologin:function(){var e=this;s(e.opts.api+"/user.php",function(t){var n=JSON.parse(t);0==n.code?e.submit(n.response):"1"==e.type&&(u.setItem("logged_in","false"),e.init())},function(){})},login:function(){function e(){o&&o.closed&&(clearInterval(t),n.user.autologin())}var t,n=this,o=window.open(n.opts.api+"/login.php","Disqus Oauth","width=470,height=508");t=setInterval(e,100)},logout:function(){var e=this;l(e.opts.api+"/logout.php",{},function(t){u.setItem("logged_in","false"),u.removeItem("type"),u.removeItem("email"),u.removeItem("avatar"),u.removeItem("name"),u.removeItem("url"),e.user.init()})},submit:function(e){u.setItem("email",e.email),u.setItem("type",e.type),u.setItem("name",e.name),u.setItem("url",e.url),u.setItem("avatar",e.avatar),u.setItem("logged_in","true"),this.init()}};var h=function(){var e=this;if(e.opts="object"==(0,a.default)(arguments[1])?arguments[1]:arguments[0],e.dom=m.getElementById("string"==typeof arguments[0]?arguments[0]:"comment"),e.opts.api="/"==e.opts.api.slice(-1)?e.opts.api.slice(0,-1):e.opts.api,e.opts.site=e.opts.site||location.origin,e.opts.url){var t=e.opts.url.replace(e.opts.site,"");e.opts.url="/"!=t.slice(0,1)?"/"+t:t}else f||v?e.opts.url=encodeURI(location.pathname)+encodeURI(location.search):e.opts.url=location.pathname+location.search;e.opts.identifier=e.opts.identifier||e.opts.url,e.opts.link=e.opts.site+e.opts.url,e.opts.title=e.opts.title||m.title,e.opts.slug=e.opts.slug?e.opts.slug.replace(/[^A-Za-z0-9_-]+/g,""):"",e.opts.desc=e.opts.desc||(m.querySelector('[name="description"]')?m.querySelector('[name="description"]').content:""),e.opts.mode=e.opts.mode||1,e.opts.timeout=e.opts.timeout||3e3,e.opts.toggle=e.opts.toggle?m.getElementById(e.opts.toggle):null,e.opts.autoCreate=!!e.opts.autoCreate||!!e.opts.auto,e.opts.emojiPath=e.opts.emojiPath||e.opts.emoji_path||"https://assets-cdn.github.com/images/icons/emoji/unicode/",e.emojiList=e.opts.emojiList||e.opts.emoji_list||[{code:"smile",title:"笑脸",unicode:"1f604"},{code:"mask",title:"生病",unicode:"1f637"},{code:"joy",title:"破涕为笑",unicode:"1f602"},{code:"stuck_out_tongue_closed_eyes",title:"吐舌",unicode:"1f61d"},{code:"flushed",title:"脸红",unicode:"1f633"},{code:"scream",title:"恐惧",unicode:"1f631"},{code:"pensive",title:"失望",unicode:"1f614"},{code:"unamused",title:"无语",unicode:"1f612"},{code:"grin",title:"露齿笑",unicode:"1f601"},{code:"heart_eyes",title:"色",unicode:"1f60d"},{code:"sweat",title:"汗",unicode:"1f613"},{code:"smirk",title:"得意",unicode:"1f60f"},{code:"relieved",title:"满意",unicode:"1f60c"},{code:"rolling_eyes",title:"翻白眼",unicode:"1f644"},{code:"ok_hand",title:"OK",unicode:"1f44c"},{code:"v",title:"胜利",unicode:"270c"}],(e.opts.emoji_preview||e.opts.emojiPreview)&&s(e.opts.api+"/eac.php",function(t){e.eac=JSON.parse(t)},function(){}),e.stat={current:"idisqus",loaded:!1,loading:!1,editing:!1,offsetTop:0,thread:null,next:null,message:null,mediaHtml:null,root:[],count:0,users:[],imageSize:[],disqusLoaded:!1},window.disqus_config=function(){this.page.identifier=e.opts.identifier,this.page.title=e.opts.title,this.page.url=e.opts.link,this.callbacks.onReady.push(function(){e.stat.current="disqus",e.stat.disqusLoaded=!0,e.dom.querySelector("#idisqus").style.display="none",e.dom.querySelector("#disqus_thread").style.display="block",3==e.opts.mode&&e.opts.toggle&&(e.opts.toggle.disabled="",e.opts.toggle.checked=!0,e.opts.toggle.addEventListener("change",e.handle.toggle,!1))})},e.opts.init&&e.init()};h.prototype.timeAgo=function(){var e=this,t={prefix:"",suffix:"前",seconds:"几秒",minute:"1分钟",minutes:"%d分钟",hour:"1小时",hours:"%d小时",day:"1天",days:"%d天",month:"1个月",months:"%d个月",year:"1年",years:"%d年"},n=function(e,n){return t[e]&&t[e].replace(/%d/i,Math.abs(Math.round(n)))},o=function(e){if(e){e=e.replace(/\.\d+/,""),e=e.replace(/-/,"/").replace(/-/,"/"),e=e.replace(/T/," ").replace(/Z/," UTC"),e=e.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),e=new Date(1e3*e||e);var o=new Date,r=.001*(o.getTime()-e)>>0,i=r/60,a=i/60,s=a/24,c=s/365;return t.prefix+(r<45&&n("seconds",r)||r<90&&n("minute",1)||i<45&&n("minutes",i)||i<90&&n("hour",1)||a<24&&n("hours",a)||a<42&&n("day",1)||s<30&&n("days",s)||s<45&&n("month",1)||s<365&&n("months",s/30)||c<1.5&&n("year",1)||n("years",c))+t.suffix}},r=e.dom.querySelectorAll(".comment-item-time");for(var i in r){var s=r[i];"object"===("undefined"==typeof s?"undefined":(0,a.default)(s))&&(s.title=new Date(s.getAttribute("datetime")),s.innerHTML=o(s.getAttribute("datetime")))}setTimeout(e.timeAgo.bind(e),6e4)},h.prototype.init=function(){var e=this;if(e.dom){var t="";switch(e.emojiList.forEach(function(n){t+='<li class="emojione-item" title="'+n.title+'" data-code=":'+n.code+':"><img class="emojione-item-image" src="'+e.opts.emojiPath+n.unicode+'.png" /></li>'}),e.dom.innerHTML='<div class="comment loading" id="idisqus">\n    <div class="loading-container" data-tip="正在加载评论……"><svg class="loading-bg" width="72" height="72" viewBox="0 0 720 720" version="1.1" xmlns="http://www.w3.org/2000/svg"><path class="ring" fill="none" stroke="#9d9ea1" d="M 0 -260 A 260 260 0 1 1 -80 -260" transform="translate(400,400)" stroke-width="50" /><polygon transform="translate(305,20)" points="50,0 0,100 18,145 50,82 92,145 100,100" style="fill:#9d9ea1"/></svg></div>\n    <div class="comment-header"><span class="comment-header-item" id="comment-count">评论</span><a target="_blank" class="comment-header-item" id="comment-link">Disqus 讨论区</a></div>\n    <div class="comment-box">\n        <div class="comment-avatar avatar"><img class="comment-avatar-image" src="//a.disquscdn.com/images/noavatar92.png" data-avatar="//a.disquscdn.com/images/noavatar92.png"></div>\n        <div class="comment-form">\n            <div class="comment-form-wrapper">\n                <textarea class="comment-form-textarea" placeholder="加入讨论……"></textarea>\n                <div class="comment-form-alert"></div>\n                <div class="comment-image">\n                    <ul class="comment-image-list"></ul>\n                    <div class="comment-image-progress">\n                        <div class="comment-image-loaded"></div>\n                    </div>\n                </div>\n                <div class="comment-actions">\n                    <div class="comment-actions-group">\n                        <input id="emoji-input" class="comment-actions-input" type="checkbox"> \n                        <label class="comment-actions-label emojione" for="emoji-input">\n                            <svg class="icon" fill="#c2c6cc" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">\n                                <g>\n                                <title>选择表情</title>\n                                <path d="M512 1024c-282.713043 0-512-229.286957-512-512s229.286957-512 512-512c282.713043 0 512 229.286957 512 512S792.486957 1024 512 1024zM512 44.521739c-258.226087 0-467.478261 209.252174-467.478261 467.478261 0 258.226087 209.252174 467.478261 467.478261 467.478261s467.478261-209.252174 467.478261-467.478261C979.478261 253.773913 768 44.521739 512 44.521739z"></path>\n                                <path d="M801.391304 554.295652c0 160.278261-129.113043 289.391304-289.391304 289.391304s-289.391304-129.113043-289.391304-289.391304L801.391304 554.295652z"></path>\n                                <path d="M674.504348 349.495652m-57.878261 0a2.6 2.6 0 1 0 115.756522 0 2.6 2.6 0 1 0-115.756522 0Z"></path>\n                                <path d="M347.269565 349.495652m-57.878261 0a2.6 2.6 0 1 0 115.756522 0 2.6 2.6 0 1 0-115.756522 0Z"></path>\n                                </g>\n                            </svg>\n                            <ul class="emojione-list">'+t+'</ul>\n                        </label>\n                        <input id="upload-input" class="comment-actions-input comment-image-input" type="file" accept="image/*" name="file"> \n                        <label class="comment-actions-label" for="upload-input">\n                            <svg class="icon" fill="#c2c6cc" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">\n                                <g>\n                                <title>上传图片</title>\n                                <path d="M15.515152 15.515152 15.515152 15.515152 15.515152 15.515152Z"></path>\n                                <path d="M15.515152 139.636364l0 806.787879 992.969697 0 0-806.787879-992.969697 0zM946.424242 884.363636l-868.848485 0 0-682.666667 868.848485 0 0 682.666667zM698.181818 356.848485c0-51.417212 41.673697-93.090909 93.090909-93.090909s93.090909 41.673697 93.090909 93.090909c0 51.417212-41.673697 93.090909-93.090909 93.090909s-93.090909-41.673697-93.090909-93.090909zM884.363636 822.30303l-744.727273 0 186.181818-496.484848 248.242424 310.30303 124.121212-93.090909z"></path>\n                                </g>\n                            </svg>\n                        </label>\n                    </div>\n                    <div class="comment-actions-form">\n                        <label class="comment-actions-label exit" title="退出登录">\n                            <svg class="icon" fill="#c2c6cc" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="48" height="48">\n                                <path d="M348.870666 210.685443l378.570081 0c32.8205 0 58.683541 26.561959 58.683541 58.683541 0 162.043606 0 324.804551 0 486.848157 0 32.81129-26.561959 58.674331-58.683541 58.674331L348.870666 814.891472c-10.477632 0-18.850323-8.363482-18.850323-18.841114l0-37.728276c0-10.477632 8.372691-18.841114 18.850323-18.841114l343.645664 0c10.477632 0 18.850323-8.372691 18.850323-18.850323L711.366653 304.983109c0-10.477632-8.372691-18.841114-18.850323-18.841114L348.870666 286.141996c-10.477632 0-18.850323-8.363482-18.850323-18.841114l0-37.728276C329.98248 219.095997 338.393034 210.685443 348.870666 210.685443z"></path>\n                                <path d="M128.152728 526.436804l112.450095 112.450095c6.985088 6.985088 19.567661 6.985088 26.552749 0l26.561959-26.561959c6.985088-6.985088 6.985088-19.567661 0-26.552749l-34.925441-34.925441L494.168889 550.84675c10.477632 0 18.850323-8.372691 18.850323-18.850323l0-37.719066c0-10.477632-8.372691-18.850323-18.850323-18.850323L258.754229 475.427036l34.925441-34.925441c6.985088-6.985088 6.985088-19.567661 0-26.552749l-26.561959-26.524097c-6.985088-6.985088-19.567661-6.985088-26.552749 0L128.152728 499.875868C120.431883 506.859933 120.431883 519.451716 128.152728 526.436804z"></path>\n                            </svg>\n                        </label>\n                        <button class="comment-form-submit">\n                            <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">\n                                <path d="M565.747623 792.837176l260.819261 112.921839 126.910435-845.424882L66.087673 581.973678l232.843092 109.933785 562.612725-511.653099-451.697589 563.616588-5.996574 239.832274L565.747623 792.837176z" fill="#ffffff"></path>\n                            </svg>\n                        </button>\n                    </div>\n                </div>\n            </div>\n            <div class="comment-form-user">'+(1!=e.opts.mode?'<div class="comment-form-auth"><button class="comment-form-login" title="使用 Disqus 帐号登录"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 200 200"><path fill="#2E9FFF" d="M102.535 167.5c-16.518 0-31.621-6.036-43.298-16.021L30.5 155.405l11.102-27.401A67.658 67.658 0 0 1 35.564 100c0-37.277 29.984-67.5 66.971-67.5 36.984 0 66.965 30.223 66.965 67.5 0 37.284-29.98 67.5-66.965 67.5zm36.567-67.693v-.188c0-19.478-13.736-33.367-37.42-33.367h-25.58v67.5h25.201c23.868.001 37.799-14.468 37.799-33.945zm-37.138 17.361h-7.482V82.841h7.482c10.989 0 18.283 6.265 18.283 17.07v.188c0 10.896-7.294 17.069-18.283 17.069z"/></svg></button></div><span> 或 </span>':"")+'<form class="comment-form-guest"><input class="comment-form-input comment-form-name" type="text" name="name" placeholder="名字（必填）" autocomplete="name"><input class="comment-form-input comment-form-email" type="email" name="email" placeholder="邮箱（必填）" autocomplete="email"><input class="comment-form-input comment-form-url" type="url" name="url" placeholder="网址（可选）" autocomplete="url"></form></div>\n        </div>\n    </div>\n    <ul id="comments" class="comment-list"></ul>\n    <a href="javascript:;" class="comment-loadmore">加载更多</a>\n</div>\n<div class="comment" id="disqus_thread"></div>',e.user=new g(e.dom,e.opts),e.box=e.dom.querySelector(".comment-box").outerHTML.replace(/<label class="comment-actions-label exit"(.|\n)*<\/label>\n/,"").replace("comment-form-wrapper","comment-form-wrapper editing").replace(/加入讨论……/,""),e.handle={logout:e.user.logout.bind(e),login:e.user.login.bind(e),loadMore:e.loadMore.bind(e),post:e.post.bind(e),postThread:e.postThread.bind(e),remove:e.remove.bind(e),show:e.show.bind(e),toggle:e.toggle.bind(e),upload:e.upload.bind(e),verify:e.verify.bind(e),jump:e.jump.bind(e),mention:e.mention.bind(e),keySelect:e.keySelect.bind(e),field:e.field,focus:e.focus,input:e.input},e.opts.mode){case 1:e.disqus();break;case 2:e.getlist();break;case 3:e.getlist(),e.disqus();break;default:e.disqus()}}},h.prototype.toggle=function(){var e=this;"disqus"==e.stat.current?(e.stat.current="idisqus",e.dom.querySelector("#idisqus").style.display="block",e.dom.querySelector("#disqus_thread").style.display="none"):e.disqus()},h.prototype.disqus=function(){var e=this,t=e.dom.querySelector(".loading-container").dataset.tip;if(e.opts.site!=location.origin)return void(1==e.opts.mode&&e.getlist());if(e.stat.disqusLoaded)e.stat.current="disqus",e.dom.querySelector("#idisqus").style.display="none",e.dom.querySelector("#disqus_thread").style.display="block";else{t="尝试连接 Disqus……";var n=m.createElement("script");n.src="//"+e.opts.forum+".disqus.com/embed.js",n.dataset.timestamp=Date.now(),n.onload=function(){e.stat.disqusLoaded=!0,t="连接成功，加载 Disqus 评论框……"},n.onerror=function(){1==e.opts.mode&&(t="连接失败，加载简易评论框……",e.getlist())};var o=new XMLHttpRequest;o.open("GET","//disqus.com/next/config.json?"+Date.now(),!0),o.timeout=e.opts.timeout,o.onreadystatechange=function(){4==o.readyState&&200==o.status&&(m.head||m.body).appendChild(n)},o.ontimeout=function(){o.abort(),1==e.opts.mode&&(t="连接超时，加载简易评论框……",e.getlist())},o.onerror=function(){1==e.opts.mode&&(t="连接失败，加载简易评论框……",e.getlist())},o.send()}},h.prototype.addListener=function(e,t,n){var o=this,r=o.dom.getElementsByClassName(e);[].forEach.call(r,function(e){e.addEventListener(t,n,!1)})},h.prototype.removeListener=function(e,t,n){var o=this,r=o.dom.getElementsByClassName(e);[].forEach.call(r,function(e){e.removeEventListener(t,n,!1)})},h.prototype.addAllListeners=function(){var e=this;e.addListener("exit","click",e.handle.logout),e.addListener("comment-form-textarea","blur",e.handle.focus),e.addListener("comment-form-textarea","focus",e.handle.focus),e.addListener("comment-form-textarea","input",e.handle.input),e.addListener("comment-form-textarea","keyup",e.handle.mention),e.addListener("comment-form-name","blur",e.handle.verify),e.addListener("comment-form-email","blur",e.handle.verify),e.addListener("comment-form-submit","click",e.handle.post),e.addListener("comment-form-login","click",e.handle.login),e.addListener("comment-image-input","change",e.handle.upload),e.addListener("emojione-item","click",e.handle.field)},h.prototype.count=function(){var e=this,t=m.querySelectorAll("[data-disqus-url]"),n=t.length;if(n>0){for(var o=[],r=0;r<n;r++)o[r]=t[r].dataset.disqusUrl.replace(e.opts.site,"");s(e.opts.api+"/count.php?links="+o.join(","),function(e){var t=JSON.parse(e),n=t.response;n.forEach(function(e){var t=document.createElement("a");t.href=e.link;var n=t.href.replace(t.origin,""),o=m.querySelector('[data-disqus-url$="'+n+'"]');o&&(o.innerHTML=e.posts,o.dataset.disqusCount=e.posts)})},function(){console.log("获取数据失败！")})}},h.prototype.popular=function(){var e=this;e.opts.popular&&s(e.opts.api+"/popular.php",function(t){var n=JSON.parse(t);if(0==n.code){var o=n.response,r="";o.forEach(function(t){r+='<li><a href="'+t.link.replace(e.opts.site,"")+'" title="'+t.title+'">'+t.title+"</a></li>"}),e.opts.popular.innerHTML=r}},function(){console.log("获取数据失败！")})},h.prototype.getlist=function(){var e=this;e.stat.loading=!0,e.dom.querySelector("#idisqus").style.display="block",e.dom.querySelector("#disqus_thread").style.display="none",s(e.opts.api+"/getcomments.php?ident="+e.opts.identifier+"&link="+e.opts.url+(e.stat.next?"&cursor="+e.stat.next:""),function(t){var n=JSON.parse(t);if(0===n.code){e.stat.offsetTop=m.documentElement.scrollTop||m.body.scrollTop,e.stat.thread=n.thread,e.stat.total=n.cursor.total,e.opts.avatar=n.forum.avatar,e.dom.querySelector(".comment-avatar-image").dataset.avatar=n.forum.avatar,"false"==e.user.logged_in&&(e.dom.querySelector(".comment-avatar-image").src=n.forum.avatar),e.opts.badge=n.forum.moderatorBadgeText,e.dom.querySelector("#idisqus").classList.remove("loading"),e.dom.querySelector("#comment-link").href=n.link,e.dom.querySelector("#comment-count").innerHTML=e.stat.total+" 条评论";var o=e.dom.querySelector(".comment-loadmore"),r=n.response?n.response:[];if(e.stat.root=[],r.forEach(function(t){e.load(t),t.parent||e.stat.root.unshift(t.id)}),n.cursor.hasPrev?e.stat.root.forEach(function(t){e.dom.querySelector(".comment-list").appendChild(e.dom.querySelector("#comment-"+t))}):(o.addEventListener("click",e.handle.loadMore,!1),e.addAllListeners()),n.cursor.hasNext?(e.stat.next=n.cursor.next,o.classList.remove("loading")):(e.stat.next=null,o.classList.add("hide")),0==r.length)return;if(window.scrollTo(0,e.stat.offsetTop),e.timeAgo(),/^#disqus|^#comment-/.test(location.hash)&&!n.cursor.hasPrev&&!e.stat.disqusLoaded&&!e.stat.loaded){var i=e.dom.querySelector("#idisqus "+location.hash);i&&window.scrollBy(0,i.getBoundingClientRect().top)}e.stat.loading=!1,e.stat.loaded=!0}else 2===n.code&&e.create()},function(){console.log("获取数据失败，请检查服务器设置。")})},h.prototype.load=function(e){var t=this,n=t.dom.querySelector('.comment-item[data-id="'+e.parent+'"]'),o={username:e.username,name:e.name,avatar:e.avatar};e.username&&t.stat.users.map(function(e){return e.username}).indexOf(e.username)==-1&&t.stat.users.push(o);var r=e.parent?{name:'<a class="comment-item-pname" href="#'+n.id+'"><svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M1.664 902.144s97.92-557.888 596.352-557.888V129.728L1024 515.84l-425.984 360.448V628.8c-270.464 0-455.232 23.872-596.352 273.28"></path></svg>'+n.dataset.name+"</a>",dom:n.querySelector(".comment-item-children"),insert:"afterbegin"}:{name:"",dom:t.dom.querySelector(".comment-list"),insert:"preview"==e.id||e.isPost?"afterbegin":"beforeend"},i="";1==e.media.length?i='<div class="comment-item-images"><a class="comment-item-image" target="_blank" href="'+e.media[0]+'" style="background-image: url('+e.media[0]+');width: 167px;height: 167px"></a></div>':e.media.length>1&&(e.media.forEach(function(e){i+='<a class="comment-item-image" target="_blank" href="'+e+'" style="background-image: url('+e+')"></a>'}),i='<div class="comment-item-images">'+i+"</div>");var a='<li class="comment-item" data-id="'+e.id+'" data-name="'+e.name+'" id="comment-'+e.id+'"><div class="comment-item-body"><a class="comment-item-avatar" href="#comment-'+e.id+'"><img src="'+e.avatar+'"></a><div class="comment-item-main"><div class="comment-item-header"><a class="comment-item-name" title="'+e.name+'" rel="nofollow" target="_blank" href="'+(e.url?e.url:"javascript:;")+'">'+e.name+"</a>"+(e.isMod?'<span class="comment-item-badge">'+t.opts.badge+"</span>":"")+r.name+'<span class="comment-item-bullet"> • </span><time class="comment-item-time" datetime="'+e.createdAt+'"></time></div><div class="comment-item-content">'+e.message+i+'</div><div class="comment-item-footer">'+(e.isPost?'<span class="comment-item-manage"><a class="comment-item-edit" href="javascript:;">编辑</a><span class="comment-item-bullet"> • </span><a class="comment-item-delete" href="javascript:;">删除</a><span class="comment-item-bullet"> • </span></span>':"")+'<a class="comment-item-reply" href="javascript:;">回复</a> </div></div></div><ul class="comment-item-children"></ul></li>';if(e.isDeleted&&(a='<li class="comment-item" data-id="'+e.id+'" id="comment-'+e.id+'" data-name="已删除"><div class="comment-item-body"><a class="comment-item-avatar" href="#comment-'+e.id+'"><img src="'+e.avatar+'"></a><div class="comment-item-main" data-message="此评论已被删除。"></div></div><ul class="comment-item-children"></ul></li>'),t.dom.querySelector('.comment-item[data-id="'+e.id+'"]')?t.dom.querySelector('.comment-item[data-id="'+e.id+'"]').outerHTML=a:r.dom.insertAdjacentHTML(r.insert,a),e.isDeleted||(t.dom.querySelector('.comment-item[data-id="'+e.id+'"] .comment-item-reply').addEventListener("click",t.handle.show,!1),t.dom.querySelector('.comment-item[data-id="'+e.id+'"] .comment-item-avatar').addEventListener("click",t.handle.jump,!1),e.parent&&t.dom.querySelector('.comment-item[data-id="'+e.id+'"] .comment-item-pname').addEventListener("click",t.handle.jump,!1)),e.isPost&&!t.stat.editing){var s=t.dom.querySelector('.comment-item[data-id="'+e.id+'"]'),c=setTimeout(function(){s.querySelector(".comment-item-manage")&&(s.querySelector(".comment-item-manage").outerHTML="")},6e5);s.querySelector(".comment-item-delete").addEventListener("click",function(n){var o={id:e.id},r=n.currentTarget;r.innerHTML="删除中",l(t.opts.api+"/removecomment.php",o,function(e){var t=JSON.parse(e);0===t.code?1==t.response.isDeleted?s.outerHTML="":(console.log(t.response.message),s.querySelector(".comment-item-manage").outerHTML=""):2===t.code&&(console.log(t.response),s.querySelector(".comment-item-manage").outerHTML="")},function(){console.log("删除出错，请稍后重试")}),clearTimeout(c)},!1),s.querySelector(".comment-item-edit").addEventListener("click",function(){t.stat.editing=e,t.edit(e)},!1)}},h.prototype.loadMore=function(e){var t=this;t.stat.offsetTop=m.documentElement.scrollTop||m.body.scrollTop,t.stat.loading||(e.currentTarget.classList.add("loading"),t.getlist())},h.prototype.focus=function(e){var t=e.currentTarget.closest(".comment-form-wrapper");t.classList.add("editing"),t.classList.contains("focus")?t.classList.remove("focus"):t.classList.add("focus")},h.prototype.input=function(e){var t=e.currentTarget.closest(".comment-form"),n=t.querySelector(".comment-form-alert");n.innerHTML=""},h.prototype.mention=function(e){var t=this,n=e.currentTarget,o=n.selectionStart,r=n.value.slice(0,o).lastIndexOf("@"),i=n.value.slice(r,o),a=t.dom.querySelector(".mention-user");if(0==i.search(/^@\w+$|^@$/)){if(38==e.keyCode||40==e.keyCode)return;var s=t.stat.users.filter(function(e){var t=new RegExp(i.slice(1),"i");return e.username.search(t)>-1}),c=t.getCaretCoord(n),l="",m="";s.length>0?(s.forEach(function(e,t){l+='<li class="mention-user-item'+(0==t?" active":"")+'" data-username="'+e.username+'"><img class="mention-user-avatar" src="'+e.avatar+'"><div class="mention-user-username">'+e.username+'</div><div class="mention-user-name">'+e.name+"</div></li>"}),a?(a.innerHTML='<ul class="mention-user-list">'+l+"</ul>",a.style.left=c.left+"px",a.style.top=c.top+"px"):(m='<div class="mention-user" style="left:'+c.left+"px;top:"+c.top+'px"><ul class="mention-user-list">'+l+"</ul></div>",t.dom.querySelector("#idisqus").insertAdjacentHTML("beforeend",m)),t.addListener("mention-user-item","mouseover",function(){t.dom.querySelector(".mention-user-item.active").classList.remove("active"),this.classList.add("active")}),t.addListener("mention-user-item","click",function(){var e="@"+this.dataset.username+" ";n.value=n.value.slice(0,r)+e+n.value.slice(o),t.dom.querySelector(".mention-user").outerHTML="",n.focus(),n.setSelectionRange(r+e.length,r+e.length),n.removeEventListener("keydown",t.handle.keySelect,!1)}),n.addEventListener("keydown",t.handle.keySelect,!1)):a&&(a.outerHTML="",n.removeEventListener("keydown",t.handle.keySelect,!1))}else a&&(a.outerHTML="",n.removeEventListener("keydown",t.handle.keySelect,!1))},h.prototype.getCaretCoord=function(e){var t=this,n=e.selectionEnd,o=m.createElement("div"),r=m.createElement("span"),i=getComputedStyle(e);[].forEach.call(i,function(e){o.style[e]=i[e]}),o.style.position="absolute",t.dom.appendChild(o),o.textContent=e.value.substr(0,n),r.textContent=e.value.substr(n)||".",o.appendChild(r);var a={top:e.offsetTop-e.scrollTop+r.offsetTop+parseFloat(i.lineHeight),left:e.offsetLeft-e.scrollLeft+r.offsetLeft};return t.dom.removeChild(o),a},h.prototype.keySelect=function(e){var t=this,n=e.currentTarget,o=n.selectionStart,r=n.value.slice(0,o).lastIndexOf("@"),i=(n.value.slice(r,o),t.dom.querySelector(".mention-user"),t.dom.querySelector(".mention-user-item.active"));switch(e.keyCode){case 13:var a="@"+i.dataset.username+" ";n.value=n.value.slice(0,r)+a+n.value.slice(o),n.setSelectionRange(r+a.length,r+a.length),t.dom.querySelector(".mention-user").outerHTML="",n.removeEventListener("keydown",t.handle.keySelect,!1),e.preventDefault();break;case 38:i.previousSibling&&(i.previousSibling.classList.add("active"),i.classList.remove("active")),e.preventDefault();break;case 40:i.nextSibling&&(i.nextSibling.classList.add("active"),i.classList.remove("active")),e.preventDefault()}},h.prototype.jump=function(e){var t=this,n=e.currentTarget,o=i(n.href).hash,r=t.dom.querySelector("#idisqus "+o);history.replaceState(void 0,void 0,o),window.scrollBy(0,r.getBoundingClientRect().top),e.preventDefault()},h.prototype.field=function(e){var t=e.currentTarget,n=t.closest(".comment-form"),o=n.querySelector(".comment-form-textarea"),r=o.selectionStart,i=0==r?t.dataset.code+" ":" "+t.dataset.code+" ";o.value=o.value.slice(0,r)+i+o.value.slice(r),o.focus(),o.setSelectionRange(r+i.length,r+i.length)},h.prototype.show=function(e){var t=this,n=e.currentTarget,o=n.closest(".comment-item"),r=t.dom.querySelector(".comment-item .comment-box:not([data-current-id])");if(r){var i=r.closest(".comment-item"),a=i.querySelector(".comment-item-cancel");a.outerHTML=a.outerHTML.replace("cancel","reply"),r.outerHTML=""}if("comment-item-reply"==n.className){n.outerHTML=n.outerHTML.replace("reply","cancel");var s=t.box.replace(/emoji-input/g,"emoji-input-"+o.dataset.id).replace(/upload-input/g,"upload-input-"+o.dataset.id);o.querySelector(".comment-item-children").insertAdjacentHTML("beforebegin",s),t.user.init(),t.addAllListeners(),o.querySelector(".comment-form-textarea").focus()}t.addListener("comment-item-reply","click",t.handle.show),t.addListener("comment-item-cancel","click",t.handle.show)},h.prototype.verify=function(e){var t=this,n=e.currentTarget,o=n.closest(".comment-box"),r=o.querySelector(".comment-avatar-image"),i=o.querySelector(".comment-form-name"),a=o.querySelector(".comment-form-email");o.querySelector(".comment-form-alert");s(t.opts.api+"/getgravatar.php?email="+a.value+"&name="+i.value,function(e){var o=JSON.parse(e);o.isEmail||n!=a||t.errorTips("您所填写的邮箱地址有误。",a),""!=i.value&&(r.src=o.gravatar)},function(){})},h.prototype.upload=function(e){var t=this,n=e.currentTarget,o=n.closest(".comment-form"),r=o.querySelector(".comment-image-progress"),i=o.querySelector(".comment-image-loaded"),a=o.querySelector(".comment-form-wrapper"),s=o.querySelector(".comment-form-alert");if(s.innerHTML="",0!==n.files.length){var c=n.files[0].size;if(c>5e6)return s.innerHTML="请选择 5M 以下图片。",void setTimeout(function(){s.innerHTML=""},3e3);if(t.stat.imageSize.indexOf(c)!=-1)return s.innerHTML="请勿选择已存在的图片。",void setTimeout(function(){s.innerHTML=""},3e3);r.style.width="80px",a.classList.add("expanded");var l=new FormData;l.append("file",n.files[0]);var m,u=n.files[0].name,d=new XMLHttpRequest;d.withCredentials=!0,d.onreadystatechange=function(){if(4==d.readyState&&200==d.status){var e=JSON.parse(d.responseText);if(0==e.code){t.stat.imageSize.push(c);var n=e.response[u].url,r=new Image;r.src=n,r.onload=function(){m.innerHTML='<img class="comment-image-object" src="'+n+'">',m.dataset.imageUrl=n,m.classList.remove("loading"),m.addEventListener("click",t.handle.remove,!1)}}else s.innerHTML="图片上传出错。",m.innerHTML="",o.getElementsByClassName("comment-image-item").length&&a.classList.remove("expanded"),setTimeout(function(){s.innerHTML=""},3e3)}},d.upload.addEventListener("progress",function(e){i.style.width=Math.ceil(e.loaded/e.total*100)+"%"},!1),d.upload.addEventListener("load",function(e){i.style.width=0,r.style.width=0;var t='<li class="comment-image-item loading" data-image-size="'+c+'">\n    <svg version="1.1" class="comment-image-object" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n        width="24px" height="30px" viewBox="0 0 24 30" style="enable-background: new 0 0 50 50;" xml:space="preserve">\n        <rect x="0" y="10" width="4" height="10" fill="rgba(127,145,158,1)" opacity="0.2">\n            <animate attributeName="opacity" attributeType="XML" values="0.2; 1; .2" begin="0s" dur="0.6s" repeatCount="indefinite" />\n            <animate attributeName="height" attributeType="XML" values="10; 20; 10" begin="0s" dur="0.6s" repeatCount="indefinite" />\n            <animate attributeName="y" attributeType="XML" values="10; 5; 10" begin="0s" dur="0.6s" repeatCount="indefinite" />\n        </rect>\n        <rect x="8" y="10" width="4" height="10" fill="rgba(127,145,158,1)" opacity="0.2">\n            <animate attributeName="opacity" attributeType="XML" values="0.2; 1; .2" begin="0.15s" dur="0.6s" repeatCount="indefinite" />\n            <animate attributeName="height" attributeType="XML" values="10; 20; 10" begin="0.15s" dur="0.6s" repeatCount="indefinite" />\n            <animate attributeName="y" attributeType="XML" values="10; 5; 10" begin="0.15s" dur="0.6s" repeatCount="indefinite" />\n        </rect>\n        <rect x="16" y="10" width="4" height="10" fill="rgba(127,145,158,1)" opacity="0.2">\n            <animate attributeName="opacity" attributeType="XML" values="0.2; 1; .2" begin="0.3s" dur="0.6s" repeatCount="indefinite" />\n            <animate attributeName="height" attributeType="XML" values="10; 20; 10" begin="0.3s" dur="0.6s" repeatCount="indefinite" />\n            <animate attributeName="y" attributeType="XML" values="10; 5; 10" begin="0.3s" dur="0.6s" repeatCount="indefinite" />\n        </rect>\n    </svg>\n</li>\n';
o.querySelector(".comment-image-list").insertAdjacentHTML("beforeend",t),m=o.querySelector('[data-image-size="'+c+'"]')},!1),d.open("POST",t.opts.api+"/upload.php",!0),d.send(l)}},h.prototype.remove=function(e){var t=this,n=e.currentTarget.closest(".comment-image-item"),o=e.currentTarget.closest(".comment-form-wrapper");n.outerHTML="",t.stat.imageSize=[];var r=o.getElementsByClassName("comment-image-item");[].forEach.call(r,function(e,n){t.stat.imageSize[n]=e.dataset.imageSize}),0==t.stat.imageSize.length&&o.classList.remove("expanded"),o.querySelector(".comment-image-input").value=""},h.prototype.errorTips=function(e,t){var n=this;"true"==n.user.logged_in&&n.handle.logout();var o=n.dom.querySelector("#idisqus"),r=n.dom.querySelector(".comment-form-error");r&&(r.outerHTML="");var i=t.offsetTop,a=t.offsetLeft,s='<div class="comment-form-error" style="top:'+i+"px;left:"+a+'px;">'+e+"</div>";o.insertAdjacentHTML("beforeend",s),setTimeout(function(){var e=n.dom.querySelector(".comment-form-error");e&&(e.outerHTML="")},3e3)},h.prototype.post=function(e){var t=this,n=e.currentTarget.closest(".comment-box[data-current-id]")||e.currentTarget.closest(".comment-item")||e.currentTarget.closest(".comment-box"),o=n.querySelector(".comment-form-textarea").value,r=n.dataset.id?n.dataset.id:"",i=n.getElementsByClassName("comment-image-item"),a=[],s="";if([].forEach.call(i,function(e,t){a[t]=e.dataset.imageUrl,s+=" "+e.dataset.imageUrl}),!n.dataset.currentId){var c=n.querySelector(".comment-form-name"),m=n.querySelector(".comment-form-email"),u=n.querySelector(".comment-form-url"),d={name:c.value,email:m.value,url:u.value.replace(/\s/g,""),avatar:n.querySelector(".comment-avatar-image").src,type:0},p=n.querySelector(".comment-form-alert"),f=function(){setTimeout(function(){p.innerHTML=""},3e3)};if("1"!=t.user.type){if(/^\s*$/i.test(d.name))return void t.errorTips("名字不能为空。",c);if(/^\s*$/i.test(d.email))return void t.errorTips("邮箱不能为空。",m);if(!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(d.email))return void t.errorTips("请正确填写邮箱。",m);if(!/^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)(([A-Za-z0-9-~]+)\.)+([A-Za-z0-9-~\/])+$|^\s*$/i.test(d.url))return void t.errorTips("请正确填写网址。",u);if(t.user.submit(d),!t.user.name&&!t.user.email)return}if(t.stat.message||t.stat.mediaHtml||(t.box=t.dom.querySelector(".comment-box").outerHTML.replace(/<label class="comment-actions-label exit"(.|\n)*<\/label>\n/,"").replace("comment-form-wrapper","comment-form-wrapper editing").replace(/加入讨论……/,"")),0==a.length&&/^\s*$/i.test(o))return p.innerHTML="评论不能为空或空格。",void n.querySelector(".comment-form-textarea").focus();var v=o;t.opts.emoji_preview?v=v.replace(/:([-+\w]+):/g,function(e){var n=e.replace(/:/g,""),o=t.eac[n]?'<img class="emojione" width="24" height="24" alt="'+n+'" title=":'+n+':" src="'+t.opts.emojiPath+t.eac[n]+'.png">':e;return o}):t.emojiList.forEach(function(e){v=v.replace(":"+e.code+":",'<img class="emojione" width="24" height="24" src="'+t.opts.emojiPath+e.unicode+'.png" />')});var g={url:t.user.url?t.user.url:"",isMod:!1,username:null,name:t.user.name,avatar:t.user.avatar,id:"preview",parent:r,createdAt:(new Date).toJSON(),message:"<p>"+v+"</p>",media:a};t.load(g),t.timeAgo(),t.stat.message=o,t.stat.mediaHtml=n.querySelector(".comment-image-list").innerHTML,r?n.querySelector(".comment-item-cancel").click():(n.querySelector(".comment-form-textarea").value="",n.querySelector(".comment-image-list").innerHTML="",n.querySelector(".comment-form-wrapper").classList.remove("expanded","editing"))}var h=o.match(/@\w+/g);if(h&&(h=h.filter(function(e){return t.stat.users.map(function(e){return e.username}).indexOf(e.slice(1))>-1}),h.length>0)){var y=new RegExp("("+h.join("|")+")","g");o=o.replace(y,"$1:disqus")}if(o+=s,n.dataset.currentId){var b={id:n.dataset.currentId,message:o};l(t.opts.api+"/updatecomment.php",b,function(e){var n=JSON.parse(e);if(0===n.code){t.stat.message=null,t.stat.mediaHtml=null;var o=n.response;t.load(o),t.timeAgo(),t.stat.editing=!1}else t.load(t.stat.editing),t.timeAgo(),t.stat.editing=!1},function(){t.load(t.stat.editing),t.timeAgo(),t.stat.editing=!1})}else{var b={thread:t.stat.thread,parent:r,message:o,name:t.user.name,email:t.user.email,url:t.user.url};l(t.opts.api+"/postcomment.php",b,function(e){var o=JSON.parse(e);if(0===o.code){t.dom.querySelector('.comment-item[data-id="preview"]').outerHTML="",t.stat.total+=1,t.dom.querySelector("#comment-count").innerHTML=t.stat.total+" 条评论";var r=o.response;r.isPost=!0,t.load(r),t.timeAgo()}else 2===o.code?(p.innerHTML=o.response,t.dom.querySelector('.comment-item[data-id="preview"]').outerHTML="",t.reEdit(n),o.response.indexOf("author")>-1&&t.handle.logout()):(p.innerHTML="提交失败，请稍后重试，错误代码："+o.code,f(),t.dom.querySelector('.comment-item[data-id="preview"]').outerHTML="",t.reEdit(n))},function(){p.innerHTML="提交出错，请稍后重试。",f(),t.dom.querySelector('.comment-item[data-id="preview"]').outerHTML="",t.reEdit(n)})}},h.prototype.reEdit=function(e){var t=this;e.dataset.id?e.querySelector(".comment-item-reply").click():e.querySelector(".comment-form-wrapper").classList.add("editing"),t.stat.message&&(e.querySelector(".comment-form-textarea").value=t.stat.message),t.stat.mediaHtml&&(e.querySelector(".comment-form-wrapper").classList.add("expanded"),e.querySelector(".comment-image-list").innerHTML=t.stat.mediaHtml,t.addListener("comment-image-item","click",t.handle.remove))},h.prototype.edit=function(e){var t=this,n=t.box.replace("comment-box","comment-box comment-box-"+e.id).replace(/emoji-input/g,"emoji-input-"+e.id).replace(/upload-input/g,"upload-input-"+e.id),o=t.dom.querySelector('.comment-item[data-id="'+e.id+'"] .comment-item-body');o.outerHTML=n,t.user.init();var r=t.dom.querySelector(".comment-box-"+e.id);r.dataset.currentId=e.id,t.addAllListeners(),r.querySelector(".comment-form-textarea").focus(),r.querySelector(".comment-actions-form").insertAdjacentHTML("afterbegin",'<a class="comment-form-cancel" href="javascript:;">取消</a>'),r.querySelector(".comment-form-cancel").addEventListener("click",function(){t.stat.editing=!1,t.load(e),t.timeAgo()},!1),t.stat.message&&(r.querySelector(".comment-form-textarea").value=t.stat.message),t.stat.mediaHtml&&(r.querySelector(".comment-form-wrapper").classList.add("expanded"),r.querySelector(".comment-image-list").innerHTML=t.stat.mediaHtml,t.addListener("comment-image-item","click",t.handle.remove))},h.prototype.create=function(){var e=this;if(e.opts.autoCreate){e.dom.querySelector(".loading-container").dataset.tip="正在创建 Thread……";var t={url:e.opts.link,identifier:e.opts.identifier,title:e.opts.title,slug:e.opts.slug,message:e.opts.desc};return void e.postThread(t)}e.dom.querySelector("#idisqus").classList.remove("loading"),e.dom.querySelector("#idisqus").innerHTML='<div class="comment-header"><span class="comment-header-item">创建 Thread</span></div><div class="comment-thread-form"><p>由于 Disqus 没有本页面的相关 Thread，故需先创建 Thread</p><div class="comment-form-item"><label class="comment-form-label">url:</label><input class="comment-form-input" id="thread-url" name="url" value="'+e.opts.link+'" disabled /></div><div class="comment-form-item"><label class="comment-form-label">identifier:</label><input class="comment-form-input" id="thread-identifier" name="identifier" value="'+e.opts.identifier+'" disabled /></div><div class="comment-form-item"><label class="comment-form-label">title:</label><input class="comment-form-input" id="thread-title" name="title" value="'+e.opts.title+'" disabled /></div><div class="comment-form-item"><label class="comment-form-label">slug:</label><input class="comment-form-input" id="thread-slug" name="slug" value="'+e.opts.slug+'" /></div><div class="comment-form-item"><label class="comment-form-label">message:</label><textarea class="comment-form-textarea" id="thread-message" name="message">'+e.opts.desc+'</textarea></div><button id="thread-submit" class="comment-form-submit">提交</button></div>',e.dom.querySelector("#thread-submit").addEventListener("click",e.handle.postThread,!1)},h.prototype.postThread=function(){var e=this;if(arguments[0].target)var t={url:e.dom.querySelector("#thread-url").value,identifier:e.dom.querySelector("#thread-identifier").value,title:e.dom.querySelector("#thread-title").value,slug:e.dom.querySelector("#thread-slug").value.replace(/[^A-Za-z0-9_-]+/g,""),message:e.dom.querySelector("#thread-message").value};else var t=arguments[0];l(e.opts.api+"/createthread.php",t,function(t){var n=JSON.parse(t);return 0!==n.code?2===n.code?n.response.indexOf("A thread already exists with link")>-1?void console.log(n.response.replace("A thread already exists with link,","已存在此链接的相关 Thread，")):n.response.indexOf("Invalid URL")>-1?void console.log("参数错误，无效的'URL'"):n.response.indexOf("Invalid slug")>-1?void console.log("参数错误，无效的'slug'"):void console.log(n.response):void console.log(n.response):void setTimeout(function(){e.getlist()},100)},function(){console.log("创建 Thread 出错，请稍后重试！")})},h.prototype.destroy=function(){var e=this;e.removeListener("exit","click",e.handle.logout),e.removeListener("comment-form-textarea","blur",e.handle.focus),e.removeListener("comment-form-textarea","focus",e.handle.focus),e.removeListener("comment-form-textarea","keyup",e.handle.mention),e.removeListener("comment-form-name","blur",e.handle.verify),e.removeListener("comment-form-email","blur",e.handle.verify),e.removeListener("comment-form-submit","click",e.handle.post),e.removeListener("comment-image-input","change",e.handle.upload),e.removeListener("comment-item-reply","click",e.handle.show),e.removeListener("comment-loadmore","click",e.handle.loadMore),e.removeListener("emojione-item","click",e.handle.field),e.dom.innerHTML="",delete e.box,delete e.dom,delete e.emojiList,delete e.user,delete e.handle,delete e.opts,delete e.stat},"object"===(0,a.default)(e)&&e&&"object"===(0,a.default)(t)&&t?e.exports=h:n(422).amd?(o=function(){return h}.call(t,n,t,e),!(void 0!==o&&(e.exports=o))):r.iDisqus=r.iDisqus||h}(window||void 0)}).call(t,n(166)(e))},3:function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},5:function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},8:function(e,t,n){e.exports=!n(16)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},9:function(e,t,n){var o=n(10),r=n(22);e.exports=n(8)?function(e,t,n){return o.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},10:function(e,t,n){var o=n(20),r=n(48),i=n(34),a=Object.defineProperty;t.f=n(8)?Object.defineProperty:function(e,t,n){if(o(e),t=i(t,!0),o(n),r)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},11:function(e,t,n){var o=n(81),r=n(26);e.exports=function(e){return o(r(e))}},12:function(e,t,n){var o=n(32)("wks"),r=n(23),i=n(3).Symbol,a="function"==typeof i,s=e.exports=function(e){return o[e]||(o[e]=a&&i[e]||(a?i:r)("Symbol."+e))};s.store=o},14:function(e,t){var n=e.exports={version:"2.5.6"};"number"==typeof __e&&(__e=n)},15:function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},16:function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},20:function(e,t,n){var o=n(15);e.exports=function(e){if(!o(e))throw TypeError(e+" is not an object!");return e}},21:function(e,t){e.exports=!0},22:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},23:function(e,t){var n=0,o=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+o).toString(36))}},25:function(e,t,n){var o=n(53),r=n(27);e.exports=Object.keys||function(e){return o(e,r)}},26:function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},27:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},28:function(e,t){e.exports={}},29:function(e,t){t.f={}.propertyIsEnumerable},30:function(e,t,n){var o=n(10).f,r=n(5),i=n(12)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,i)&&o(e,i,{configurable:!0,value:t})}},31:function(e,t,n){var o=n(32)("keys"),r=n(23);e.exports=function(e){return o[e]||(o[e]=r(e))}},32:function(e,t,n){var o=n(14),r=n(3),i="__core-js_shared__",a=r[i]||(r[i]={});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:o.version,mode:n(21)?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},33:function(e,t){var n=Math.ceil,o=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?o:n)(e)}},34:function(e,t,n){var o=n(15);e.exports=function(e,t){if(!o(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!o(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!o(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!o(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},35:function(e,t,n){var o=n(3),r=n(14),i=n(21),a=n(36),s=n(10).f;e.exports=function(e){var t=r.Symbol||(r.Symbol=i?{}:o.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},36:function(e,t,n){t.f=n(12)},38:function(e,t,n){var o=n(3),r=n(14),i=n(78),a=n(9),s=n(5),c="prototype",l=function(e,t,n){var m,u,d,p=e&l.F,f=e&l.G,v=e&l.S,g=e&l.P,h=e&l.B,y=e&l.W,b=f?r:r[t]||(r[t]={}),S=b[c],w=f?o:v?o[t]:(o[t]||{})[c];f&&(n=t);for(m in n)u=!p&&w&&void 0!==w[m],u&&s(b,m)||(d=u?w[m]:n[m],b[m]=f&&"function"!=typeof w[m]?n[m]:h&&u?i(d,o):y&&w[m]==d?function(e){var t=function(t,n,o){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,o)}return e.apply(this,arguments)};return t[c]=e[c],t}(d):g&&"function"==typeof d?i(Function.call,d):d,g&&((b.virtual||(b.virtual={}))[m]=d,e&l.R&&S&&!S[m]&&a(S,m,d)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},46:function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},47:function(e,t,n){var o=n(15),r=n(3).document,i=o(r)&&o(r.createElement);e.exports=function(e){return i?r.createElement(e):{}}},48:function(e,t,n){e.exports=!n(8)&&!n(16)(function(){return 7!=Object.defineProperty(n(47)("div"),"a",{get:function(){return 7}}).a})},49:function(e,t,n){"use strict";var o=n(21),r=n(38),i=n(54),a=n(9),s=n(28),c=n(83),l=n(30),m=n(89),u=n(12)("iterator"),d=!([].keys&&"next"in[].keys()),p="@@iterator",f="keys",v="values",g=function(){return this};e.exports=function(e,t,n,h,y,b,S){c(n,t,h);var w,x,L,q=function(e){if(!d&&e in j)return j[e];switch(e){case f:return function(){return new n(this,e)};case v:return function(){return new n(this,e)}}return function(){return new n(this,e)}},T=t+" Iterator",M=y==v,k=!1,j=e.prototype,E=j[u]||j[p]||y&&j[y],O=E||q(y),H=y?M?q("entries"):O:void 0,_="Array"==t?j.entries||E:E;if(_&&(L=m(_.call(new e)),L!==Object.prototype&&L.next&&(l(L,T,!0),o||"function"==typeof L[u]||a(L,u,g))),M&&E&&E.name!==v&&(k=!0,O=function(){return E.call(this)}),o&&!S||!d&&!k&&j[u]||a(j,u,O),s[t]=O,s[T]=g,y)if(w={values:M?O:q(v),keys:b?O:q(f),entries:H},S)for(x in w)x in j||i(j,x,w[x]);else r(r.P+r.F*(d||k),t,w);return w}},50:function(e,t,n){var o=n(20),r=n(86),i=n(27),a=n(31)("IE_PROTO"),s=function(){},c="prototype",l=function(){var e,t=n(47)("iframe"),o=i.length,r="<",a=">";for(t.style.display="none",n(80).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(r+"script"+a+"document.F=Object"+r+"/script"+a),e.close(),l=e.F;o--;)delete l[c][i[o]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s[c]=o(e),n=new s,s[c]=null,n[a]=e):n=l(),void 0===t?n:r(n,t)}},51:function(e,t,n){var o=n(53),r=n(27).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return o(e,r)}},52:function(e,t){t.f=Object.getOwnPropertySymbols},53:function(e,t,n){var o=n(5),r=n(11),i=n(77)(!1),a=n(31)("IE_PROTO");e.exports=function(e,t){var n,s=r(e),c=0,l=[];for(n in s)n!=a&&o(s,n)&&l.push(n);for(;t.length>c;)o(s,n=t[c++])&&(~i(l,n)||l.push(n));return l}},54:function(e,t,n){e.exports=n(9)},64:function(e,t,n){var o=n(26);e.exports=function(e){return Object(o(e))}},70:function(e,t,n){e.exports={default:n(73),__esModule:!0}},71:function(e,t,n){e.exports={default:n(74),__esModule:!0}},72:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(71),i=o(r),a=n(70),s=o(a),c="function"==typeof s.default&&"symbol"==typeof i.default?function(e){return typeof e}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};t.default="function"==typeof s.default&&"symbol"===c(i.default)?function(e){return"undefined"==typeof e?"undefined":c(e)}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":"undefined"==typeof e?"undefined":c(e)}},73:function(e,t,n){n(96),n(94),n(97),n(98),e.exports=n(14).Symbol},74:function(e,t,n){n(95),n(99),e.exports=n(36).f("iterator")},75:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},76:function(e,t){e.exports=function(){}},77:function(e,t,n){var o=n(11),r=n(92),i=n(91);e.exports=function(e){return function(t,n,a){var s,c=o(t),l=r(c.length),m=i(a,l);if(e&&n!=n){for(;l>m;)if(s=c[m++],s!=s)return!0}else for(;l>m;m++)if((e||m in c)&&c[m]===n)return e||m||0;return!e&&-1}}},78:function(e,t,n){var o=n(75);e.exports=function(e,t,n){if(o(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,o){return e.call(t,n,o)};case 3:return function(n,o,r){return e.call(t,n,o,r)}}return function(){return e.apply(t,arguments)}}},79:function(e,t,n){var o=n(25),r=n(52),i=n(29);e.exports=function(e){var t=o(e),n=r.f;if(n)for(var a,s=n(e),c=i.f,l=0;s.length>l;)c.call(e,a=s[l++])&&t.push(a);return t}},80:function(e,t,n){var o=n(3).document;e.exports=o&&o.documentElement},81:function(e,t,n){var o=n(46);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==o(e)?e.split(""):Object(e)}},82:function(e,t,n){var o=n(46);e.exports=Array.isArray||function(e){return"Array"==o(e)}},83:function(e,t,n){"use strict";var o=n(50),r=n(22),i=n(30),a={};n(9)(a,n(12)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=o(a,{next:r(1,n)}),i(e,t+" Iterator")}},84:function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},85:function(e,t,n){var o=n(23)("meta"),r=n(15),i=n(5),a=n(10).f,s=0,c=Object.isExtensible||function(){return!0},l=!n(16)(function(){return c(Object.preventExtensions({}))}),m=function(e){a(e,o,{value:{i:"O"+ ++s,w:{}}})},u=function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,o)){if(!c(e))return"F";if(!t)return"E";m(e)}return e[o].i},d=function(e,t){if(!i(e,o)){if(!c(e))return!0;if(!t)return!1;m(e)}return e[o].w},p=function(e){return l&&f.NEED&&c(e)&&!i(e,o)&&m(e),e},f=e.exports={KEY:o,NEED:!1,fastKey:u,getWeak:d,onFreeze:p}},86:function(e,t,n){var o=n(10),r=n(20),i=n(25);e.exports=n(8)?Object.defineProperties:function(e,t){r(e);for(var n,a=i(t),s=a.length,c=0;s>c;)o.f(e,n=a[c++],t[n]);return e}},87:function(e,t,n){var o=n(29),r=n(22),i=n(11),a=n(34),s=n(5),c=n(48),l=Object.getOwnPropertyDescriptor;t.f=n(8)?l:function(e,t){if(e=i(e),t=a(t,!0),c)try{return l(e,t)}catch(e){}if(s(e,t))return r(!o.f.call(e,t),e[t])}},88:function(e,t,n){var o=n(11),r=n(51).f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return r(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==i.call(e)?s(e):r(o(e))}},89:function(e,t,n){var o=n(5),r=n(64),i=n(31)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),o(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},90:function(e,t,n){var o=n(33),r=n(26);e.exports=function(e){return function(t,n){var i,a,s=String(r(t)),c=o(n),l=s.length;return c<0||c>=l?e?"":void 0:(i=s.charCodeAt(c),i<55296||i>56319||c+1===l||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):i:e?s.slice(c,c+2):(i-55296<<10)+(a-56320)+65536)}}},91:function(e,t,n){var o=n(33),r=Math.max,i=Math.min;e.exports=function(e,t){return e=o(e),e<0?r(e+t,0):i(e,t)}},92:function(e,t,n){var o=n(33),r=Math.min;e.exports=function(e){return e>0?r(o(e),9007199254740991):0}},93:function(e,t,n){"use strict";var o=n(76),r=n(84),i=n(28),a=n(11);e.exports=n(49)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):"keys"==t?r(0,n):"values"==t?r(0,e[n]):r(0,[n,e[n]])},"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},94:function(e,t){},95:function(e,t,n){"use strict";var o=n(90)(!0);n(49)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=o(t,n),this._i+=e.length,{value:e,done:!1})})},96:function(e,t,n){"use strict";var o=n(3),r=n(5),i=n(8),a=n(38),s=n(54),c=n(85).KEY,l=n(16),m=n(32),u=n(30),d=n(23),p=n(12),f=n(36),v=n(35),g=n(79),h=n(82),y=n(20),b=n(15),S=n(11),w=n(34),x=n(22),L=n(50),q=n(88),T=n(87),M=n(10),k=n(25),j=T.f,E=M.f,O=q.f,H=o.Symbol,_=o.JSON,C=_&&_.stringify,A="prototype",I=p("_hidden"),P=p("toPrimitive"),N={}.propertyIsEnumerable,D=m("symbol-registry"),z=m("symbols"),R=m("op-symbols"),B=Object[A],F="function"==typeof H,J=o.QObject,X=!J||!J[A]||!J[A].findChild,U=i&&l(function(){return 7!=L(E({},"a",{get:function(){return E(this,"a",{value:7}).a}})).a})?function(e,t,n){var o=j(B,t);o&&delete B[t],E(e,t,n),o&&e!==B&&E(B,t,o)}:E,$=function(e){var t=z[e]=L(H[A]);return t._k=e,t},G=F&&"symbol"==typeof H.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof H},Z=function(e,t,n){return e===B&&Z(R,t,n),y(e),t=w(t,!0),y(n),r(z,t)?(n.enumerable?(r(e,I)&&e[I][t]&&(e[I][t]=!1),n=L(n,{enumerable:x(0,!1)})):(r(e,I)||E(e,I,x(1,{})),e[I][t]=!0),U(e,t,n)):E(e,t,n)},V=function(e,t){y(e);for(var n,o=g(t=S(t)),r=0,i=o.length;i>r;)Z(e,n=o[r++],t[n]);return e},W=function(e,t){return void 0===t?L(e):V(L(e),t)},K=function(e){var t=N.call(this,e=w(e,!0));return!(this===B&&r(z,e)&&!r(R,e))&&(!(t||!r(this,e)||!r(z,e)||r(this,I)&&this[I][e])||t)},Y=function(e,t){if(e=S(e),t=w(t,!0),e!==B||!r(z,t)||r(R,t)){var n=j(e,t);return!n||!r(z,t)||r(e,I)&&e[I][t]||(n.enumerable=!0),n}},Q=function(e){for(var t,n=O(S(e)),o=[],i=0;n.length>i;)r(z,t=n[i++])||t==I||t==c||o.push(t);return o},ee=function(e){for(var t,n=e===B,o=O(n?R:S(e)),i=[],a=0;o.length>a;)!r(z,t=o[a++])||n&&!r(B,t)||i.push(z[t]);return i};F||(H=function(){if(this instanceof H)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===B&&t.call(R,n),r(this,I)&&r(this[I],e)&&(this[I][e]=!1),U(this,e,x(1,n))};return i&&X&&U(B,e,{configurable:!0,set:t}),$(e)},s(H[A],"toString",function(){return this._k}),T.f=Y,M.f=Z,n(51).f=q.f=Q,n(29).f=K,n(52).f=ee,i&&!n(21)&&s(B,"propertyIsEnumerable",K,!0),f.f=function(e){return $(p(e))}),a(a.G+a.W+a.F*!F,{Symbol:H});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)p(te[ne++]);for(var oe=k(p.store),re=0;oe.length>re;)v(oe[re++]);a(a.S+a.F*!F,"Symbol",{for:function(e){return r(D,e+="")?D[e]:D[e]=H(e)},keyFor:function(e){if(!G(e))throw TypeError(e+" is not a symbol!");for(var t in D)if(D[t]===e)return t},useSetter:function(){X=!0},useSimple:function(){X=!1}}),a(a.S+a.F*!F,"Object",{create:W,defineProperty:Z,defineProperties:V,getOwnPropertyDescriptor:Y,getOwnPropertyNames:Q,getOwnPropertySymbols:ee}),_&&a(a.S+a.F*(!F||l(function(){var e=H();return"[null]"!=C([e])||"{}"!=C({a:e})||"{}"!=C(Object(e))})),"JSON",{stringify:function(e){for(var t,n,o=[e],r=1;arguments.length>r;)o.push(arguments[r++]);if(n=t=o[1],(b(t)||void 0!==e)&&!G(e))return h(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!G(t))return t}),o[1]=t,C.apply(_,o)}}),H[A][P]||n(9)(H[A],P,H[A].valueOf),u(H,"Symbol"),u(Math,"Math",!0),u(o.JSON,"JSON",!0)},97:function(e,t,n){n(35)("asyncIterator")},98:function(e,t,n){n(35)("observable")},99:function(e,t,n){n(93);for(var o=n(3),r=n(9),i=n(28),a=n(12)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<s.length;c++){var l=s[c],m=o[l],u=m&&m.prototype;u&&!u[a]&&r(u,a,l),i[l]=i.Array}},134:function(e,t,n){e.exports={default:n(135),__esModule:!0}},135:function(e,t,n){n(137),e.exports=n(14).Object.keys},136:function(e,t,n){var o=n(38),r=n(14),i=n(16);e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],a={};a[e]=t(n),o(o.S+o.F*i(function(){n(1)}),"Object",a)}},137:function(e,t,n){var o=n(64),r=n(25);n(136)("keys",function(){return function(e){return r(o(e))}})},166:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},422:function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}}});